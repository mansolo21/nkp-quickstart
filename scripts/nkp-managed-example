nkp create cluster nutanix --cluster-name $CLUSTER_NAME \
--endpoint=${NUTANIX_PC_FQDN_ENDPOINT_WITH_PORT} \
--control-plane-endpoint-ip=${CONTROL_PLANE_IP} \
--control-plane-vm-image=${IMAGE_NAME} \
--control-plane-prism-element-cluster=${PRISM_ELEMENT_CLUSTER_NAME} \
--control-plane-subnets=${SUBNET_NAME} \
--control-plane-replicas=${CONTROL_PLANE_REPLICAS} \
--control-plane-vcpus=${CONTROL_PLANE_VCPUS} \
--control-plane-memory=${CONTROL_PLANE_MEMORY_GIB} \
--worker-vm-image=${IMAGE_NAME} \
--worker-prism-element-cluster=${PRISM_ELEMENT_CLUSTER_NAME} \
--worker-subnets=${SUBNET_NAME} \
--worker-vcpus=${WORKER_VCPUS} \
--worker-memory=${WORKER_MEMORY_GIB} \
--ssh-public-key-file=${SSH_KEY_FILE} \
--csi-storage-container=${NUTANIX_STORAGE_CONTAINER_NAME} \
--kubernetes-service-load-balancer-ip-range=${LB_IP_RANGE} \
--insecure \
--airgapped \
--registry-mirror-url=${REGISTRY_URL} \
--registry-mirror-cacert=${REGISTRY_CA} \
--registry-mirror-username=${REGISTRY_USERNAME} \
--registry-mirror-password=${REGISTRY_PASSWORD} \
--registry-url=${DOCKER_REGISTRY} \
--registry-cacert=${REGISTRY_CA} \
--registry-username=${REGISTRY_USERNAME} \
--registry-password=${REGISTRY_PASSWORD} \
--dry-run \
--output=yaml >> cluster.yaml
